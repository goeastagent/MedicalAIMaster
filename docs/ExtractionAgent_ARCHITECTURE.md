# ExtractionAgent ì•„í‚¤í…ì²˜

> ìì—°ì–´ ì¿¼ë¦¬ë¥¼ ë¶„ì„í•˜ì—¬ ë°ì´í„° ì ‘ê·¼ì„ ìœ„í•œ Execution Planì„ ìƒì„±í•˜ëŠ” ì—ì´ì „íŠ¸

## ğŸ“– ê°œìš”

ExtractionAgentëŠ” IndexingAgentê°€ êµ¬ì¶•í•œ **PostgreSQL ë©”íƒ€ë°ì´í„°**ì™€ **Neo4j ì˜¨í†¨ë¡œì§€**ë¥¼ í™œìš©í•˜ì—¬:
1. ì‚¬ìš©ìì˜ **ìì—°ì–´ ì§ˆì˜**ë¥¼ ë¶„ì„
2. ë°ì´í„° ìœ„ì¹˜ì™€ ì ‘ê·¼ ë°©ë²•ì„ ë‹´ì€ **Execution Plan JSON**ì„ ìƒì„±

í•µì‹¬ ì² í•™: **"ìš”ë¦¬(ë¶„ì„)ë¥¼ ìœ„í•œ ì™„ë²½í•œ ë ˆì‹œí”¼ì™€ ì¬ë£Œ ìœ„ì¹˜ë¥¼ ì œê³µí•œë‹¤"**
- ë°ì´í„° ìì²´(Values)ê°€ ì•„ë‹Œ ë°ì´í„° í•¸ë“¤(Handle)ì„ ë°˜í™˜
- Analysis Agentê°€ Planì„ ë°›ì•„ ì‹¤ì œ ë°ì´í„° ë¡œë“œ/ì²˜ë¦¬ ìˆ˜í–‰

---

## ğŸ”„ ì›Œí¬í”Œë¡œìš° (6-Phase)

```
ì…ë ¥: "2023ë…„ ìœ„ì•” í™˜ìì˜ ì‹¬ë°•ìˆ˜ ë°ì´í„°ë¥¼ ì¤˜"
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  [100] query_understanding ğŸ¤–    â”‚
        â”‚  Intent ë¶„ë¥˜ + Entity ì¶”ì¶œ       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  [200] semantic_resolver ğŸ¤–ğŸ“    â”‚
        â”‚  "ì‹¬ë°•ìˆ˜" â†’ Solar8000/HR ë§¤í•‘    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  [300] topology_navigator ğŸ“     â”‚
        â”‚  Cohort/Target/Join Path íƒìƒ‰   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  [400] cohort_analyzer ğŸ“ğŸ¤–      â”‚
        â”‚  í•„í„° ë¡œì§ ìƒì„±                  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  [500] plan_builder ğŸ“           â”‚
        â”‚  Execution Plan JSON ì¡°ë¦½       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  [600] plan_validator ğŸ“ğŸ¤–       â”‚
        â”‚  ê²€ì¦ + Confidence ê³„ì‚°          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
ì¶œë ¥: Execution Plan JSON (confidence: 0.92)
```

---

## ğŸ“‹ Execution Plan êµ¬ì¡°

```json
{
  "intent": "data_retrieval",
  "execution_plan": {
    "cohort_source": {
      "file_path": "clinical_data.csv",
      "filter_logic": [{"column": "diagnosis", "op": "LIKE", "value": "%Stomach%"}],
      "result_identifier": "caseid"
    },
    "data_sources": [{
      "group_id": "vital_case_records",
      "target_parameters": ["Solar8000/HR"],
      "join_key": "caseid"
    }],
    "join_specification": {
      "paths": [{"from": "cohort", "to": "signal", "on": "caseid"}]
    }
  },
  "validation": { "confidence": 0.92 }
}
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
ExtractionAgent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ graph.py        # LangGraph ì›Œí¬í”Œë¡œìš°
â”‚   â”‚   â”œâ”€â”€ state.py        # AgentState
â”‚   â”‚   â”œâ”€â”€ nodes/          # 6ê°œ ë…¸ë“œ êµ¬í˜„
â”‚   â”‚   â””â”€â”€ context/        # ë™ì  ì»¨í…ìŠ¤íŠ¸ ë¡œë”©
â”‚   â”œâ”€â”€ models/             # Pydantic ëª¨ë¸
â”‚   â””â”€â”€ config.py           # ì„¤ì •
â””â”€â”€ test_pipeline.py        # í…ŒìŠ¤íŠ¸
```

ìì„¸í•œ ë‚´ìš©ì€ `ExtractionAgent/ARCHITECTURE.md`ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
