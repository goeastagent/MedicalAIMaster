# IndexingAgent ì•„í‚¤í…ì²˜

> ì˜ë£Œ ë°ì´í„° íŒŒì¼ì„ ë¶„ì„í•˜ì—¬ PostgreSQLê³¼ Neo4jì— ìë™ìœ¼ë¡œ ì¸ë±ì‹±í•˜ëŠ” ì—ì´ì „íŠ¸

## ğŸ“– ê°œìš”

IndexingAgentëŠ” ì˜ë£Œ ë°ì´í„° íŒŒì¼(CSV, Signal ë“±)ì„ ë¶„ì„í•˜ì—¬:
1. **PostgreSQL ë°ì´í„°ë² ì´ìŠ¤**ì— ì •í˜•í™”ëœ í…Œì´ë¸”ë¡œ ì €ì¥
2. **Neo4j ê·¸ë˜í”„ ë°ì´í„°ë² ì´ìŠ¤**ì— ì˜¨í†¨ë¡œì§€(ì§€ì‹ ê·¸ë˜í”„)ë¥¼ êµ¬ì¶•

í•µì‹¬ ì² í•™: **"Rule Prepares, LLM Decides"**
- ê·œì¹™ ê¸°ë°˜ ë¡œì§ì´ ë°ì´í„°ë¥¼ ì „ì²˜ë¦¬í•˜ê³  í›„ë³´ë¥¼ ì¶”ì¶œ
- LLMì´ ìµœì¢… íŒë‹¨ (ì˜ë¯¸ í•´ì„, ê´€ê³„ ì¶”ë¡ )
- ë¶ˆí™•ì‹¤í•  ë•ŒëŠ” ì‚¬ëŒì—ê²Œ ì§ˆë¬¸ (Human-in-the-Loop)

---

## ğŸ”„ ì›Œí¬í”Œë¡œìš°

```
ì…ë ¥: ì˜ë£Œ ë°ì´í„° ë””ë ‰í† ë¦¬ (CSV, .vital, Signal Files)
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PHASE 1: ë©”íƒ€ë°ì´í„° ìˆ˜ì§‘ ğŸ“     â”‚
        â”‚  - directory_catalog (100)       â”‚
        â”‚  - file_catalog (200)            â”‚
        â”‚  - file_grouping_prep (250)      â”‚
        â”‚  - schema_aggregation (300)      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PHASE 2: ì˜ë¯¸ ë¶„ì„ ğŸ¤–           â”‚
        â”‚  - file_grouping (350)           â”‚
        â”‚  - file_classification (400)     â”‚
        â”‚  - column_classification (420)   â”‚
        â”‚  - metadata_semantic (500)       â”‚
        â”‚  - parameter_semantic (600)      â”‚
        â”‚  - directory_pattern (700)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  PHASE 3: ê´€ê³„ ì¶”ë¡  ğŸ¤–+Neo4j     â”‚
        â”‚  - entity_identification (800)   â”‚
        â”‚  - relationship_inference (900)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
                    â–¼
ì¶œë ¥: PostgreSQL (12ê°œ í…Œì´ë¸”) + Neo4j (ì˜¨í†¨ë¡œì§€)
```

---

## ğŸ“Š ì£¼ìš” DB í…Œì´ë¸”

| í…Œì´ë¸” | ìš©ë„ |
|--------|------|
| `directory_catalog` | ë””ë ‰í† ë¦¬ ë©”íƒ€ë°ì´í„° |
| `file_group` | íŒŒì¼ ê·¸ë£¹ ì •ì˜ |
| `file_catalog` | íŒŒì¼ ë©”íƒ€ë°ì´í„° |
| `column_metadata` | ì»¬ëŸ¼ ë©”íƒ€ë°ì´í„° |
| `parameter` | ë…¼ë¦¬ì  íŒŒë¼ë¯¸í„° (Wide/Long/Signal í†µí•©) |
| `data_dictionary` | íŒŒë¼ë¯¸í„° ì •ì˜ ì‚¬ì „ |
| `table_entities` | í…Œì´ë¸” Entity ì •ì˜ |
| `table_relationships` | í…Œì´ë¸” ê°„ FK ê´€ê³„ |

---

## ğŸ”§ ì‹¤í–‰ ë°©ë²•

```bash
# 1. ì„œë¹„ìŠ¤ ì‹œì‘
cd IndexingAgent
./run_postgres_neo4j.sh

# 2. ì¸ë±ì‹± ì‹¤í–‰
python test_full_pipeline_results.py

# 3. ê²°ê³¼ í™•ì¸
python view_database.py
```

---

## ğŸ“ íŒŒì¼ êµ¬ì¡°

```
IndexingAgent/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ agents/           # LangGraph ì›Œí¬í”Œë¡œìš°
â”‚   â”‚   â”œâ”€â”€ graph.py      # ì›Œí¬í”Œë¡œìš° ì •ì˜
â”‚   â”‚   â”œâ”€â”€ state.py      # AgentState
â”‚   â”‚   â”œâ”€â”€ registry.py   # NodeRegistry
â”‚   â”‚   â””â”€â”€ nodes/        # ê°œë³„ ë…¸ë“œ êµ¬í˜„
â”‚   â”œâ”€â”€ database/         # PostgreSQL + Neo4j
â”‚   â””â”€â”€ processors/       # íŒŒì¼ ì²˜ë¦¬ê¸° (CSV, Signal)
â”œâ”€â”€ data/                 # ë°ì´í„° ë””ë ‰í† ë¦¬
â””â”€â”€ run_postgres_neo4j.sh # ì„œë¹„ìŠ¤ ì‹œì‘ ìŠ¤í¬ë¦½íŠ¸
```

ìì„¸í•œ ë‚´ìš©ì€ `IndexingAgent/ARCHITECTURE.md`ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.
