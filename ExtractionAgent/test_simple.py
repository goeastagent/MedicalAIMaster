#!/usr/bin/env python3
"""
ExtractionAgent ê°„ë‹¨ í…ŒìŠ¤íŠ¸ - 3ê°œ ì˜ˆì œ ìë™ ì‹¤í–‰
"""

import sys
import os

sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from dotenv import load_dotenv
load_dotenv()

from ExtractionAgent.src.extraction_agent import ExtractionAgent


def main():
    print("\n" + "=" * 60)
    print("ğŸš€ ExtractionAgent ê°„ë‹¨ í…ŒìŠ¤íŠ¸")
    print("=" * 60)
    
    agent = ExtractionAgent()
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì˜ˆì œ 1: operations í…Œì´ë¸”ì—ì„œ 10ëª… ì¡°íšŒ
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    print("\n\nğŸ“Œ [ì˜ˆì œ 1] operations í…Œì´ë¸” ì¡°íšŒ")
    print("-" * 40)
    
    result = agent.extract(
        query="operations í…Œì´ë¸”ì—ì„œ 10ëª…ì˜ ë‚˜ì´, ì„±ë³„, ì²´ì¤‘ì„ ë³´ì—¬ì¤˜",
        result_limit=10
    )
    
    if result["success"] and result["data"] is not None:
        print(f"âœ… {result['row_count']}í–‰ ë°˜í™˜")
        print(result["data"])
    else:
        print(f"âŒ ì‹¤íŒ¨: {result.get('error')}")
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì˜ˆì œ 2: labs í…Œì´ë¸”ì—ì„œ ê²€ì‚¬í•­ëª© ì¢…ë¥˜ í™•ì¸
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    print("\n\nğŸ“Œ [ì˜ˆì œ 2] labs í…Œì´ë¸” - ê²€ì‚¬ í•­ëª© ì¢…ë¥˜")
    print("-" * 40)
    
    result = agent.extract(
        query="labs í…Œì´ë¸”ì—ì„œ item_name ì¢…ë¥˜ë¥¼ ì¤‘ë³µ ì—†ì´ ë³´ì—¬ì¤˜",
        result_limit=20
    )
    
    if result["success"] and result["data"] is not None:
        print(f"âœ… {result['row_count']}í–‰ ë°˜í™˜")
        print(result["data"])
    else:
        print(f"âŒ ì‹¤íŒ¨: {result.get('error')}")
    
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì˜ˆì œ 3: medications í…Œì´ë¸”ì—ì„œ ì´ ê°œìˆ˜
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    print("\n\nğŸ“Œ [ì˜ˆì œ 3] medications í…Œì´ë¸” - ì´ ê¸°ë¡ ìˆ˜")
    print("-" * 40)
    
    result = agent.extract(
        query="medications í…Œì´ë¸”ì— ì´ ëª‡ ê°œì˜ ê¸°ë¡ì´ ìˆì–´?",
        result_limit=10
    )
    
    if result["success"] and result["data"] is not None:
        print(f"âœ… ê²°ê³¼:")
        print(result["data"])
    else:
        print(f"âŒ ì‹¤íŒ¨: {result.get('error')}")
    
    print("\n" + "=" * 60)
    print("âœ… í…ŒìŠ¤íŠ¸ ì™„ë£Œ!")
    print("=" * 60)


if __name__ == "__main__":
    main()

